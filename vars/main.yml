---

consul_dir: "{{ services_dir }}/consul"
consul_conf_dir: "{{ consul_dir }}/conf.d"

consul_service: consul.service.consul

# Container settings
consul_container:
  image: consul:1.4.4
  name: consul
  restart: always
  network: "{{ consul_network }}"

# Exporter settings
consul_exporter_container:
  image: prom/consul-exporter:v0.4.0
  name: consul_exporter
  dns: "{{ private_network.address }}"
  network: "{{ consul_network }}"
  restart: always

consul_exporter_service:
  name: consul-exporter
  tags:
    - "{{ env }}"
  meta:
    hostname: "{{ ansible_hostname }}"
    tier: "{{ env }}"
